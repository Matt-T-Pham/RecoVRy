{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\mtp8\\\\Documents\\\\GitHub\\\\we\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useRef}from'react';import{useStateValue}from'../state';import'../css/AccountPage.scss';import Modal from'@material-ui/core/Modal';import TextField from'@material-ui/core/TextField';import Button from'@material-ui/core/Button';import EditIcon from'../images/pencil.png';import CancelIcon from'../images/close.png';import ConfirmIcon from'../images/tick.png';var newPassword='';var newPasswordConf='';var changePassword=function changePassword(username,newPassword){fetch(\"\".concat(window.location.origin,\"/changepassword\"),{method:'POST',body:JSON.stringify({username:username,newPassword:newPassword}),headers:{'Content-Type':'application/json'}}).then(function(response){if(!response.ok)throw Error(response.statusText);}).catch(console.log);};var editInfo=function editInfo(newInfo,dispatch){dispatch({type:'update',userEmail:newInfo.email,userPhoneNumber:newInfo.phoneNumber,userAddress:newInfo.address});fetch(\"\".concat(window.location.origin,\"/edituser\"),{method:'POST',body:JSON.stringify(newInfo),headers:{'Content-Type':'application/json'}}).then(function(response){if(!response.ok)throw Error(response.statusText);}).catch(console.log);};var Account=function Account(){var _useStateValue=useStateValue(),_useStateValue2=_slicedToArray(_useStateValue,2),_useStateValue2$=_useStateValue2[0],username=_useStateValue2$.username,userFirstName=_useStateValue2$.userFirstName,userLastName=_useStateValue2$.userLastName,userEmail=_useStateValue2$.userEmail,userPhoneNumber=_useStateValue2$.userPhoneNumber,userAddress=_useStateValue2$.userAddress,dispatch=_useStateValue2[1];var _useState=useState(false),_useState2=_slicedToArray(_useState,2),modalOpen=_useState2[0],setModalOpen=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),editable=_useState4[0],setEditable=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),passwordsMatch=_useState6[0],setPasswordsMatch=_useState6[1];var addressEl=useRef(null);var emailEl=useRef(null);var phoneNumEl=useRef(null);return React.createElement(\"div\",{className:\"AccountPage\"},React.createElement(\"h1\",{className:\"AccountPage__header\"},\"Account Info\",React.createElement(\"img\",{src:editable?CancelIcon:EditIcon,alt:\"Edit\",onClick:function onClick(){return setEditable(!editable);}}),editable&&React.createElement(\"img\",{src:ConfirmIcon,alt:\"Confirm\",onClick:function onClick(){editInfo({address:addressEl.current.value,email:emailEl.current.value,phoneNumber:phoneNumEl.current.value,username:username},dispatch);setEditable(!editable);}})),React.createElement(\"div\",{className:\"AccountPage__info\"},React.createElement(TextField,{disabled:true,label:\"Name\",defaultValue:\"\".concat(userFirstName,\" \").concat(userLastName)}),React.createElement(TextField,{disabled:true,label:\"Username\",defaultValue:username}),React.createElement(TextField,{inputRef:emailEl,disabled:!editable,variant:editable?\"filled\":\"standard\",label:\"Email\",defaultValue:userEmail}),React.createElement(TextField,{inputRef:phoneNumEl,disabled:!editable,variant:editable?\"filled\":\"standard\",label:\"Phone Number\",defaultValue:userPhoneNumber}),React.createElement(TextField,{inputRef:addressEl,disabled:!editable,variant:editable?\"filled\":\"standard\",label:\"Address\",defaultValue:userAddress})),React.createElement(Button,{className:\"AccountPage__button\",variant:\"outlined\",style:{marginTop:\"1rem\"},onClick:function onClick(){return setModalOpen(true);}},\"Change Password\"),React.createElement(Modal,{open:modalOpen,onClose:function onClose(){setModalOpen(false);setPasswordsMatch(true);}},React.createElement(\"div\",{className:\"Modal\"},React.createElement(\"h2\",{style:{marginLeft:\"1rem\"}},\"NEW PASSWORD\"),React.createElement(\"form\",{noValidate:true,autoComplete:\"off\",style:{margin:\"1rem\"}},React.createElement(TextField,{fullWidth:true,onChange:function onChange(e){newPassword=e.target.value;},label:\"Password\",type:\"password\",variant:\"outlined\"}),React.createElement(TextField,{fullWidth:true,type:\"password\",onChange:function onChange(e){newPasswordConf=e.target.value;},label:\"Confirm Password\",variant:\"outlined\",style:{margin:\"1rem 0\"}}),!passwordsMatch&&React.createElement(\"p\",{style:{width:'100%',textAlign:'center',margin:'0 0 1rem 0',color:'red'}},\"Passwords Don't Match\"),React.createElement(Button,{fullWidth:true,variant:\"outlined\",onClick:function onClick(){if(newPassword!==newPasswordConf)setPasswordsMatch(false);else{changePassword(username,newPassword);setModalOpen(false);setPasswordsMatch(true);}}},\"Confirm Password Change\")))));};export default Account;","map":{"version":3,"sources":["C:/Users/mtp8/Documents/GitHub/we/src/pages/AccountPage.js"],"names":["React","useState","useRef","useStateValue","Modal","TextField","Button","EditIcon","CancelIcon","ConfirmIcon","newPassword","newPasswordConf","changePassword","username","fetch","window","location","origin","method","body","JSON","stringify","headers","then","response","ok","Error","statusText","catch","console","log","editInfo","newInfo","dispatch","type","userEmail","email","userPhoneNumber","phoneNumber","userAddress","address","Account","userFirstName","userLastName","modalOpen","setModalOpen","editable","setEditable","passwordsMatch","setPasswordsMatch","addressEl","emailEl","phoneNumEl","current","value","marginTop","marginLeft","margin","e","target","width","textAlign","color"],"mappings":"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","sourcesContent":["import React, { useState, useRef } from 'react';\r\nimport { useStateValue } from '../state'\r\nimport '../css/AccountPage.scss'\r\nimport Modal from '@material-ui/core/Modal'\r\nimport TextField from '@material-ui/core/TextField'\r\nimport Button from '@material-ui/core/Button'\r\nimport EditIcon from '../images/pencil.png'\r\nimport CancelIcon from '../images/close.png'\r\nimport ConfirmIcon from '../images/tick.png'\r\n\r\nlet newPassword = ''\r\nlet newPasswordConf = ''\r\n\r\nconst changePassword = (username, newPassword) => {\r\n  fetch(`${window.location.origin}/changepassword`, {\r\n    method: 'POST',\r\n    body: JSON.stringify({\r\n      username: username,\r\n      newPassword: newPassword\r\n    }),\r\n    headers: {\r\n      'Content-Type': 'application/json'\r\n    }\r\n  }).then((response) => {\r\n    if (!response.ok) throw Error(response.statusText)\r\n\r\n  }).catch(console.log)\r\n}\r\n\r\nconst editInfo = (newInfo, dispatch) => {\r\n  dispatch({\r\n    type: 'update',\r\n    userEmail: newInfo.email,\r\n    userPhoneNumber: newInfo.phoneNumber,\r\n    userAddress: newInfo.address\r\n  })\r\n  fetch(`${window.location.origin}/edituser`, {\r\n    method: 'POST',\r\n    body: JSON.stringify(newInfo),\r\n    headers: {\r\n      'Content-Type': 'application/json'\r\n    }\r\n  }).then((response) => {\r\n    if (!response.ok) throw Error(response.statusText)\r\n\r\n  }).catch(console.log)\r\n}\r\n\r\nconst Account = () => {\r\n  const [{ username, userFirstName, userLastName, userEmail, userPhoneNumber, userAddress }, dispatch] = useStateValue()\r\n  const [modalOpen, setModalOpen] = useState(false);\r\n  const [editable, setEditable] = useState(false);\r\n  const [passwordsMatch, setPasswordsMatch] = useState(true);\r\n  const addressEl = useRef(null)\r\n  const emailEl = useRef(null)\r\n  const phoneNumEl = useRef(null)\r\n \r\n  return (\r\n      <div className=\"AccountPage\">\r\n        <h1 className=\"AccountPage__header\">\r\n          Account Info\r\n          <img src={editable ? CancelIcon : EditIcon} alt=\"Edit\" onClick={() => setEditable(!editable)}/>\r\n          {editable && <img src={ConfirmIcon} alt=\"Confirm\" onClick={() => { \r\n            editInfo({address: addressEl.current.value, \r\n              email: emailEl.current.value, \r\n              phoneNumber: phoneNumEl.current.value,\r\n              username: username }, dispatch)\r\n            setEditable(!editable) }} /> }\r\n        </h1>\r\n\r\n        <div className=\"AccountPage__info\">\r\n          <TextField disabled label=\"Name\" defaultValue={`${userFirstName} ${userLastName}`} />\r\n          <TextField disabled label=\"Username\" defaultValue={username} />\r\n          <TextField inputRef={emailEl} disabled={!editable} variant={editable ? \"filled\" : \"standard\"} label=\"Email\" defaultValue={userEmail} />\r\n          <TextField inputRef={phoneNumEl} disabled={!editable} variant={editable ? \"filled\" : \"standard\"} label=\"Phone Number\" defaultValue={userPhoneNumber} />\r\n          <TextField inputRef={addressEl} disabled={!editable} variant={editable ? \"filled\" : \"standard\"} label=\"Address\" defaultValue={userAddress} />\r\n        </div>\r\n        <Button className=\"AccountPage__button\" variant=\"outlined\" style={{ marginTop: \"1rem\" }} onClick={() => setModalOpen(true)}>Change Password</Button>\r\n\r\n        <Modal open={modalOpen} onClose={() => { setModalOpen(false); setPasswordsMatch(true) }}>\r\n          <div className=\"Modal\">\r\n            <h2 style={{ marginLeft: \"1rem\" }}>NEW PASSWORD</h2>\r\n            <form noValidate autoComplete=\"off\" style={{ margin: \"1rem\" }}>\r\n              <TextField fullWidth onChange={(e) => { newPassword = e.target.value }}\r\n                label=\"Password\" type=\"password\" variant=\"outlined\" />\r\n              <TextField fullWidth type=\"password\" onChange={(e) => { newPasswordConf = e.target.value }}\r\n                label=\"Confirm Password\" variant=\"outlined\" style={{ margin: \"1rem 0\" }} />\r\n              {!passwordsMatch && <p style={{width: '100%', textAlign: 'center', margin: '0 0 1rem 0', color: 'red'}}>Passwords Don't Match</p>}\r\n              <Button fullWidth variant=\"outlined\"\r\n                onClick={() => {\r\n                  if(newPassword !== newPasswordConf) setPasswordsMatch(false)\r\n                  else {\r\n                    changePassword(username, newPassword)\r\n                    setModalOpen(false)\r\n                    setPasswordsMatch(true)\r\n                  }\r\n                }}>Confirm Password Change</Button>\r\n            </form>\r\n          </div>\r\n        </Modal>\r\n      </div>\r\n  );\r\n}\r\n\r\nexport default Account;\r\n"]},"metadata":{},"sourceType":"module"}