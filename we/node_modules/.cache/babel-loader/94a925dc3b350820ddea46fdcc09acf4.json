{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\mtp8\\\\Documents\\\\GitHub\\\\we\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import'../css/LoginForm.scss';import React,{useState}from'react';import{useStateValue}from'../state';import Logo from'../images/logo.png';var Login=function Login(props){var _useStateValue=useStateValue(),_useStateValue2=_slicedToArray(_useStateValue,2),dispatch=_useStateValue2[1];var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var authenticate=function authenticate(){var resProm=fetch(window.location.href,{method:'POST',body:JSON.stringify({\"username\":username,\"password\":password}),headers:{'Content-Type':'application/json'}});resProm.then(function(response){if(!response.ok)throw Error(response.statusText);response.json().then(function(json){if(json.isAuth){dispatch({type:'loginUser',firstName:json.firstName,lastName:json.lastName,username:username,email:json.email,phoneNumber:json.phoneNumber,address:json.address,accessLevel:json.accessLevel});}});}).catch(console.log);};return React.createElement(\"div\",null,React.createElement(\"img\",{src:Logo,alt:\"RecoVRy\",height:100}),React.createElement(\"div\",{className:\"Login-form\"},React.createElement(\"div\",{className:\"Login-form--overlay\"},React.createElement(\"div\",{className:\"Login-form__header\"},React.createElement(\"h1\",{className:\"\"},\"Log in\"),React.createElement(\"p\",null,\"If you don\\u2019t have an account, talk to your therapist or admin about creating one.\")),React.createElement(\"input\",{className:\"Login-form__field\",type:\"text\",placeholder:\"User ID\",onInput:function onInput(e){return setUsername(e.target.value);}}),React.createElement(\"input\",{className:\"Login-form__field\",type:\"password\",placeholder:\"Password\",onInput:function onInput(e){return setPassword(e.target.value);},onKeyPress:function onKeyPress(e){if(e.key===\"Enter\")setTimeout(authenticate,1000);}}),React.createElement(\"div\",{onClick:authenticate,className:\"Login-form__field Login-form__button\"},\"Login\"))));};export default Login;","map":{"version":3,"sources":["C:/Users/mtp8/Documents/GitHub/we/src/components/LoginForm.js"],"names":["React","useState","useStateValue","Logo","Login","props","dispatch","username","setUsername","password","setPassword","authenticate","resProm","fetch","window","location","href","method","body","JSON","stringify","headers","then","response","ok","Error","statusText","json","isAuth","type","firstName","lastName","email","phoneNumber","address","accessLevel","catch","console","log","e","target","value","key","setTimeout"],"mappings":"kKAAA,MAAO,uBAAP,CACA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,OAASC,aAAT,KAA8B,UAA9B,CACA,MAAOC,CAAAA,IAAP,KAAiB,oBAAjB,CAEA,GAAMC,CAAAA,KAAK,CAAG,QAARA,CAAAA,KAAQ,CAACC,KAAD,CAAW,oBAEAH,aAAa,EAFb,kDAEZI,QAFY,kCAGWL,QAAQ,CAAC,EAAD,CAHnB,wCAGdM,QAHc,eAGJC,WAHI,8BAIWP,QAAQ,CAAC,EAAD,CAJnB,yCAIdQ,QAJc,eAIJC,WAJI,eAMrB,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,EAAM,CACvB,GAAMC,CAAAA,OAAO,CAAGC,KAAK,CAACC,MAAM,CAACC,QAAP,CAAgBC,IAAjB,CAAuB,CACxCC,MAAM,CAAE,MADgC,CAExCC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CAAC,WAAYb,QAAb,CAAuB,WAAYE,QAAnC,CAAf,CAFkC,CAGxCY,OAAO,CAAE,CACP,eAAgB,kBADT,CAH+B,CAAvB,CAArB,CAQAT,OAAO,CAACU,IAAR,CAAa,SAACC,QAAD,CAAc,CACvB,GAAG,CAACA,QAAQ,CAACC,EAAb,CAAiB,KAAMC,CAAAA,KAAK,CAACF,QAAQ,CAACG,UAAV,CAAX,CAEjBH,QAAQ,CAACI,IAAT,GAAgBL,IAAhB,CAAqB,SAAAK,IAAI,CAAI,CACzB,GAAGA,IAAI,CAACC,MAAR,CAAe,CACXtB,QAAQ,CAAC,CACLuB,IAAI,CAAE,WADD,CAELC,SAAS,CAAEH,IAAI,CAACG,SAFX,CAGLC,QAAQ,CAAEJ,IAAI,CAACI,QAHV,CAILxB,QAAQ,CAAEA,QAJL,CAKLyB,KAAK,CAAEL,IAAI,CAACK,KALP,CAMLC,WAAW,CAAEN,IAAI,CAACM,WANb,CAOLC,OAAO,CAAEP,IAAI,CAACO,OAPT,CAQLC,WAAW,CAAER,IAAI,CAACQ,WARb,CAAD,CAAR,CAUH,CACJ,CAbD,EAcH,CAjBD,EAiBGC,KAjBH,CAiBSC,OAAO,CAACC,GAjBjB,EAkBH,CA3BD,CA6BA,MACI,gCACI,2BAAK,GAAG,CAAEnC,IAAV,CAAgB,GAAG,CAAC,SAApB,CAA8B,MAAM,CAAE,GAAtC,EADJ,CAEI,2BAAK,SAAS,CAAC,YAAf,EACI,2BAAK,SAAS,CAAC,qBAAf,EACI,2BAAK,SAAS,CAAC,oBAAf,EACI,0BAAI,SAAS,CAAC,EAAd,WADJ,CAEI,sHAFJ,CADJ,CAKI,6BAAO,SAAS,CAAC,mBAAjB,CAAqC,IAAI,CAAC,MAA1C,CAAiD,WAAW,CAAC,SAA7D,CAAuE,OAAO,CAAE,iBAAAoC,CAAC,QAAI/B,CAAAA,WAAW,CAAC+B,CAAC,CAACC,MAAF,CAASC,KAAV,CAAf,EAAjF,EALJ,CAMI,6BAAO,SAAS,CAAC,mBAAjB,CAAqC,IAAI,CAAC,UAA1C,CAAqD,WAAW,CAAC,UAAjE,CACA,OAAO,CAAE,iBAAAF,CAAC,QAAI7B,CAAAA,WAAW,CAAC6B,CAAC,CAACC,MAAF,CAASC,KAAV,CAAf,EADV,CAC2C,UAAU,CAAE,oBAAAF,CAAC,CAAI,CAAC,GAAGA,CAAC,CAACG,GAAF,GAAU,OAAb,CAAsBC,UAAU,CAAChC,YAAD,CAAe,IAAf,CAAV,CAA+B,CADlH,EANJ,CAQI,2BAAK,OAAO,CAAEA,YAAd,CAA4B,SAAS,CAAC,sCAAtC,UARJ,CADJ,CAFJ,CADJ,CAiBH,CApDD,CAsDA,cAAeP,CAAAA,KAAf","sourcesContent":["import '../css/LoginForm.scss'\r\nimport React, { useState } from 'react'\r\nimport { useStateValue } from '../state'\r\nimport Logo from '../images/logo.png'\r\n\r\nconst Login = (props) => {\r\n\r\n    const [, dispatch] = useStateValue();\r\n    const [username, setUsername] = useState(\"\");\r\n    const [password, setPassword] = useState(\"\");\r\n\r\n    const authenticate = () => {\r\n        const resProm = fetch(window.location.href, {\r\n            method: 'POST',\r\n            body: JSON.stringify({\"username\": username, \"password\": password}),\r\n            headers: {\r\n              'Content-Type': 'application/json'\r\n            }\r\n        });\r\n        \r\n        resProm.then((response) => {\r\n            if(!response.ok) throw Error(response.statusText)\r\n\r\n            response.json().then(json => {\r\n                if(json.isAuth){\r\n                    dispatch({\r\n                        type: 'loginUser',\r\n                        firstName: json.firstName,\r\n                        lastName: json.lastName,\r\n                        username: username,\r\n                        email: json.email,\r\n                        phoneNumber: json.phoneNumber,\r\n                        address: json.address,\r\n                        accessLevel: json.accessLevel\r\n                    });\r\n                }\r\n            })\r\n        }).catch(console.log)\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <img src={Logo} alt=\"RecoVRy\" height={100}/>\r\n            <div className=\"Login-form\">\r\n                <div className=\"Login-form--overlay\">\r\n                    <div className=\"Login-form__header\">\r\n                        <h1 className=\"\">Log in</h1>\r\n                        <p>If you donâ€™t have an account, talk to your therapist or admin about creating one.</p>\r\n                    </div>\r\n                    <input className=\"Login-form__field\" type=\"text\" placeholder=\"User ID\" onInput={e => setUsername(e.target.value)}/>\r\n                    <input className=\"Login-form__field\" type=\"password\" placeholder=\"Password\" \r\n                    onInput={e => setPassword(e.target.value)} onKeyPress={e => {if(e.key === \"Enter\") setTimeout(authenticate, 1000)}}/>\r\n                    <div onClick={authenticate} className=\"Login-form__field Login-form__button\">Login</div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Login;"]},"metadata":{},"sourceType":"module"}